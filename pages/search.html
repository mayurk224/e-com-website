<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Purchase Paradise | Search</title>
    <link rel="stylesheet" href="/style.css">
</head>
<body>

    <div class="navbar">
        <a href="/index.html" class="logo">
          <img
            src="https://img.icons8.com/external-parzival-1997-outline-color-parzival-1997/64/external-satisfaction-logistics-and-supply-chain-management-parzival-1997-outline-color-parzival-1997.png"
            alt="external-satisfaction-logistics-and-supply-chain-management-parzival-1997-outline-color-parzival-1997" />
          <label for="">Purchase Paradise</label>
        </a>
        
        <div class="ctc">
          <a href="" class="loginbtn"><img src="https://img.icons8.com/ios-filled/50/login-rounded-right.png"
              alt="login-rounded-right" />
            <label for="">Login</label>
          </a>
          <a href="/pages/cart.html" class="cartbtn"><img src="https://img.icons8.com/material-outlined/24/shopping-cart--v1.png"
              alt="shopping-cart--v1" />
            <label for="">Cart</label>
          </a>
        </div>
      </div>

      <div class="searchSection">
        <div class="searchContent">
            <h1>Search</h1>
        <hr>
        <div>
                <input type="search" name="" id="" placeholder="Search product to buy">
              <br>
              <div class="productsContainer" id="productsContainer">

              </div>
        </div>
        </div>
      </div>

      <div class="footer">
        <div class="top">
          <div class="left">
            <img
              src="https://img.icons8.com/external-parzival-1997-outline-color-parzival-1997/64/external-satisfaction-logistics-and-supply-chain-management-parzival-1997-outline-color-parzival-1997.png"
              alt="external-satisfaction-logistics-and-supply-chain-management-parzival-1997-outline-color-parzival-1997" />
            <h1 for="">Purchase Paradise</h1>
          </div>
          <div class="right">
            <div class="fabout">
              <h3>About</h3>
              <ul>
                <li><a href="/pages/contactus.html">Contact Us</a></li>
                <li><a href="/pages/aboutus.html">About Us</a></li>
                <li><a href="">Careers</a></li>
              </ul>
            </div>
            <div class="fabout">
              <h3>Help</h3>
              <ul>
                <li><a href="">Payment</a></li>
                <li><a href="">Shipping</a></li>
                <li><a href="">Cancellation & Return</a></li>
                <li><a href="">Report</a></li>
              </ul>
            </div>
            <div class="fabout">
              <h3>Consumer's Policy</h3>
              <ul>
                <li><a href="">Terms & Conditions</a></li>
                <li><a href="">Security</a></li>
                <li><a href="">Privacy</a></li>
                <li><a href="">Cancellation & Return</a></li>
              </ul>
            </div>
          </div>
        </div>
        <hr>
        <div class="bottom">
          <div class="bleft">
            <label for="">
              @ 2024 Purchase Paradiseâ„¢ . All Rights Reserved.
            </label>
          </div>
          <div class="bright">
            <img width="24" height="24" src="https://img.icons8.com/material-sharp/24/facebook-new.png"
              alt="facebook-new" />
            <img width="24" height="24" src="https://img.icons8.com/material-rounded/24/instagram-new.png"
              alt="instagram-new" />
            <img width="24" height="24" src="https://img.icons8.com/material-rounded/24/twitterx--v1.png"
              alt="twitterx--v1" />
          </div>
        </div>
      </div>
  
      <a href="#" class="to-top">
        <img src="https://img.icons8.com/color/48/circled-up--v1.png" alt="circled-up--v1" />
      </a>

      <script>
        const toTop = document.querySelector(".to-top");

window.addEventListener("scroll", () => {
  if (window.pageYOffset > 100) {
    toTop.classList.add("active");
  } else {
    toTop.classList.remove("active");
  }
});

document.addEventListener('DOMContentLoaded', function () {
      const label = document.getElementById('proTtl');

      if (label) {
        const originalText = label.innerText.trim();
        truncateLabel(label, 5);

        // Set the full title as the tooltip
        label.title = originalText;
      }
    });

    function truncateLabel(label, words) {
      const text = label.innerText.trim();
      const truncatedText = text.split(' ').slice(0, words).join(' ');
      label.innerText = truncatedText + '...';
    }


    function refreshPage() {
      location.reload(true); // true parameter forces a reload from the server
    }

    // Initial product data
    let allProducts = [];

    // Initial product display
    fetchProducts();

    function fetchProducts() {
      fetch('https://fakestoreapi.com/products')
        .then(response => response.json())
        .then(data => {
          allProducts = data;
          displayProducts(allProducts);
        })
        .catch(error => console.error('Error fetching products:', error));
    }

    function displayProducts(products) {
      const productsContainer = document.getElementById("productsContainer");
      productsContainer.innerHTML = "";

      products.forEach((product) => {
        const productCard = createProductCard(product);
        productsContainer.appendChild(productCard);
      });
    }

    function createProductCard(product) {
      const productCard = document.createElement("div");
      productCard.classList.add("productCard");
      productCard.id = product.id;
      

      productCard.innerHTML = `
        <div class="cardimg">
            <img class="img" src="${product.image}" alt="${product.title}">
        </div>
        <div class="carddetails">
            <label for="" class="proTtl" title="${product.title}">${product.title}</label>
            <label for="" class="proCat">${product.category}</label>
            <label for="" class="proPrice">$ ${product.price}</label>
            <div>
                <label for="" class="proRate">Rating : ${product.rating.rate}</label>
                <label>|</label>
                <label for="" class="proCount">Review : ${product.rating.count}</label>
            </div>
            <a href = "/pages/product.html">View Product</a>
        </div>`;

      return productCard;
    }
      </script>
    
</body>
</html>